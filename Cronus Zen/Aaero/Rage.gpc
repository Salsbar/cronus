const int32 times[] = {0,21706,22206,22856,22860,22861,22906,22973,23006,23040,23056,23073,23156,23190,23207,23240,23257,23273,23290,23307,23390,23407,23524,23540,23624,23865,23866,24107,24291,24341,24374,24391,24441,24474,24491,24541,24558,24575,24591,24625,24641,24658,24675,24708,24741,24758,24808,24825,24875,24892,24925,25075,25081,25082,25092,25158,25425,25609,25676,25709,25742,25759,25792,25809,25843,25859,25909,25926,25943,25959,26009,26026,26043,26059,26076,26109,26126,26159,26176,26226,26243,26260,26276,26293,26343,27044,27046,27047,27144,27177,27194,27211,27227,27277,27311,27327,27344,27361,27377,27394,27411,27427,27477,27511,27544,27561,27611,27644,27661,27711,28195,28212,28428,28462,28512,28529,28545,28595,28612,28645,28662,28679,28695,28712,28729,28745,28767,28768,28779,28795,28812,28829,28862,28879,28912,28929,28962,28979,29012,29029,29062,29129,29680,29813,29847,29897,29913,29930,29980,29997,30030,30047,30080,30097,30130,30150,30151,30163,30180,30197,30214,30230,30247,30297,30314,30347,30364,30397,30414,30430,30464,30480,30697,30964,31164,31215,31265,31281,31298,31365,31398,31415,31431,31481,31498,31515,31549,31550,31565,31582,31598,31615,31632,31665,31682,31715,31732,31748,31765,31782,31798,31815,31849,31899,32583,32616,32633,32683,32716,32766,32783,32816,32833,32916,32966,33000,33016,33066,33116,33133,33200,33217,33250,33734,33750,33984,34051,34067,34117,34134,34168,34184,34218,34234,34268,34284,34318,34334,34351,34368,34384,34401,34434,34451,34484,34501,34535,34551,34568,34585,34601,34668,34918,34919,35169,35385,35435,35452,35469,35502,35519,35536,35552,35569,35586,35602,35619,35636,35652,35669,35686,35702,35719,35736,35752,35786,35802,35836,35853,35869,35886,35919,35936,35953,35969,35986,36019,36093,36094,36236,36420,36503,36703,36753,36770,36820,36837,36854,36887,36904,36937,36954,37004,37020,37037,37054,37070,37104,37120,37137,37154,37187,37204,37237,37254,37271,37304,37337,37354,37387,37421,37437,38105,38109,38110,38155,38272,38288,38305,38322,38338,38355,38388,38405,38422,38438,38455,38488,38505,38522,38539,38572,38587,38588,38589,38591,38592,38639,38689,38722,38739,38772,38789,38805,39289,39306,39523,39573,39623,39640,39673,39690,39723,39740,39773,39790,39806,39840,39856,39857,39857,39873,39890,39907,39923,39940,39957,39973,40023,40040,40057,40073,40123,40140,40224,40824,40908,40958,40974,40991,41008,41024,41074,41091,41108,41124,41175,41191,41208,41225,41247,41248,41291,41308,41325,41375,41391,41425,41441,41475,41491,41525,41542,41558,41708,41725,41808,42059,42292,42326,42376,42392,42409,42442,42459,42492,42509,42526,42559,42576,42593,42609,42631,42632,42643,42659,42676,42693,42709,42726,42759,42776,42809,42826,42860,42876,42910,42943,42993,43427,43644,43677,43710,43727,43777,43794,43844,43861,43911,43944,43961,43977,43994,44011,44027,44044,44077,44144,44161,44178,44228,44244,44294,44311,44361,44845,44862,45095,45145,45162,45179,45212,45229,45262,45279,45329,45345,45362,45379,45395,45412,45429,45445,45462,45479,45512,45529,45579,45596,45629,45646,45662,45679,45696,45712,45762,46046,46047,46330,46463,46480,46513,46547,46563,46580,46613,46630,46680,46697,46713,46730,46747,46763,46813,46830,46847,46880,46897,46930,46947,46980,46997,47014,47047,47064,47114,47264,47270,47271,47281,47364,47548,47564,47598,47781,47831,47848,47881,47915,47931,47948,47981,47998,48031,48048,48081,48098,48115,48131,48198,48215,48232,48248,48265,48282,48315,48332,48365,48382,48432,48448,48465,48532,48874,48875,49216,49233,49333,49399,49416,49433,49466,49483,49566,49583,49600,49616,49700,49733,49766,49800,49816,49867,49883,49900,50384,50400,50617,50651,50734,50751,50784,50801,50851,50868,50901,50918,50934,50963,50964,50968,50984,51001,51018,51068,51084,51134,51151,51185,51201,51251,51318,52002,52035,52102,52119,52152,52169,52202,52219,52269,52286,52302,52319,52342,52343,52386,52402,52419,52452,52469,52519,52536,52569,52586,52603,52636,52653,52803,52819,52903,53170,53353,53420,53470,53487,53504,53537,53554,53587,53604,53654,53670,53687,53704,53730,53731,53737,53754,53770,53787,53804,53820,53871,53887,53921,53937,53987,54004,54021,54071,54087,54788,54805,54872,54905,54938,54955,54988,55005,55038,55055,55088,55122,55138,55155,55172,55189,55205,55255,55305,55322,55372,55389,55405,55422,55439,55472,55789,55806,56139,56173,56190,56240,56256,56273,56306,56323,56340,56356,56373,56423,56440,56456,56473,56490,56506,56507,56507,56523,56540,56557,56573,56590,56623,56640,56673,56690,56740,56757,56773,56790,56807,56857,57524,57558,57624,57641,57658,57691,57708,57741,57758,57808,57824,57841,57875,57890,57891,57891,57925,57941,57975,57991,58041,58058,58108,58125,58175,58192,58225,58425,58458,58709,58909,58959,59009,59026,59042,59076,59092,59126,59142,59193,59209,59226,59243,59259,59284,59285,59293,59309,59343,59359,59393,59409,59443,59459,59510,59526,59543,59560,59576,59626,59643,60327,60444,60460,60494,60511,60561,60577,60661,60677,60694,60711,60727,60794,60861,60894,60911,60961,60978,60994,61128,61144,61728,61762,61845,61862,61895,61912,61945,61962,61979,61995,62045,62060,62061,62062,62095,62112,62145,62162,62196,62212,62246,62262,62296,62312,62346,62362,62412,62896,63130,63180,63197,63213,63230,63247,63263,63297,63313,63363,63380,63397,63413,63430,63443,63444,63447,63463,63480,63497,63514,63547,63564,63597,63614,63647,63664,63697,63714,63730,63764,63914,63931,63981,64231,64448,64498,64531,64598,64615,64648,64665,64715,64731,64748,64765,64781,64798,64832,64833,64848,64865,64882,64898,64932,64948,64998,65015,65065,65082,65098,65132,65165,65816,65832,66149,66649,66650,66767,67267,67267,67268,67301,67317,67351,67367,67417,67434,67467,67484,67518,67534,67568,67584,67618,67634,67651,67668,67684,67701,67751,67768,67801,67818,67868,67885,67968,68310,68311,68652,68685,68735,68752,68769,68785,68836,68852,68886,68902,68919,68936,68952,68969,69002,69036,69052,69069,69102,69119,69169,69186,69219,69236,69253,69269,69286,69453,69461,69462,69469,69553,69786,70003,70037,70120,70137,70153,70170,70187,70237,70254,70287,70304,70337,70354,70387,70404,70420,70437,70454,70470,70504,70521,70571,70587,70621,70637,70654,70671,70721,70737,71079,71080,71421,71471,71488,71538,71555,71588,71605,71622,71655,71672,71705,71755,71772,71805,71855,71905,71939,71955,72005,72039,72055,72089,72573,72589,72823,72890,72906,72923,72956,72973,73006,73023,73056,73073,73106,73123,73151,73152,73156,73173,73190,73223,73240,73273,73290,73340,73357,73407,73423,73507,73524,74074,74208,74241,74274,74291,74308,74324,74374,74391,74424,74441,74458,74474,74508,74525,74547,74548,74558,74575,74591,74608,74658,74675,74725,74741,74791,74808,74825,74875,75108,75342,75359,75559,75592,75609,75659,75676,75692,75726,75742,75792,75809,75843,75859,75876,75926,75928,75929,75959,75993,76009,76059,76076,76109,76126,76176,76193,76210,76293,76977,76994,77060,77077,77127,77144,77194,77211,77311,77327,77344,77377,77444,77477,77511,77544,77561,77578,77611,77628,77644,78128,78145,78362,78412,78462,78478,78495,78545,78562,78595,78612,78645,78662,78679,78745,78762,78779,78829,78846,78879,78896,78912,78962,78979,78996,79062,79337,79338,79613,79763,79780,79847,79863,79897,79913,79963,79980,80013,80030,80047,80097,80113,80163,80180,80197,80230,80247,80297,80314,80347,80364,80380,80414,80488,80489,80631,80898,81048,81081,81122,81123,81131,81132,81133,81198,81215,81265,81281,81315,81331,81381,81398,81431,81448,81465,81481,81498,81515,81532,81548,81598,81615,81665,81682,81715,81732,81748,81765,81815,81832,82165,82166,82499,82533,82583,82616,82683,82699,82716,82749,82783,82833,82850,82866,82900,82916,82950,82966,83016,83066,83083,83133,83150,83183,83200,83684,83700,83917,83967,83984,84001,84017,84034,84051,84084,84101,84117,84151,84168,84184,84201,84218,84234,84251,84251,84252,84318,84334,84368,84384,84401,84434,84451,84501,84518,84551,84601,85135,85302,85369,85385,85402,85435,85452,85485,85502,85552,85569,85586,85619,85636,85639,85640,85652,85669,85702,85719,85769,85786,85819,85836,85869,85886,85903,85919,85936,86103,86119,86203,86453,86520,86670,86687,86770,86787,86803,86854,86887,86904,86970,86987,87041,87042,87054,87087,87104,87254,87287,87304,87337,87354,87387,88038,88105,88155,88172,88222,88238,88272,88288,88322,88338,88355,88372,88388,88405,88438,88455,88505,88539,88589,88605,88655,88672,88705,88722,88739,89239,89240,118969,119469,119520,119703,119937,119987,120020,120087,120103,120153,120170,120220,120237,120254,120270,120287,120304,120319,120320,120320,120337,120354,120370,120387,120437,120454,120504,120521,120571,120587,120637,120871,121355,121388,121405,121455,121488,121522,121538,121572,121588,121622,121638,121655,121672,121688,121705,121722,121755,121772,121788,121805,121839,121905,121972,121989,122005,122039,122523,122539,122756,122823,122840,122856,122890,122906,122956,122973,123006,123023,123040,123056,123090,123123,123140,123173,123190,123223,123240,123273,123290,123340,123357,123373,123390,123407,123423,123457,123732,123733,124007,124141,124208,124224,124241,124274,124291,124341,124358,124391,124408,124441,124458,124491,124508,124525,124541,124558,124608,124625,124658,124675,124725,124741,124758,124775,124942,124950,124951,124958,125042,125209,125225,125275,125509,125542,125609,125626,125659,125676,125709,125726,125759,125776,125792,125809,125843,125876,125893,125909,125926,125959,125976,126009,126026,126059,126076,126109,126126,126143,126176,126226,126910,126912,126913,126960,127010,127044,127060,127077,127094,127110,127127,127144,127160,127177,127211,127227,127261,127294,127311,127327,127377,127427,127444,127511,127528,127544,127578,128061,128078,128312,128328,128362,128378,128395,128428,128445,128495,128512,128545,128562,128595,128612,128629,128644,128645,128645,128662,128679,128712,128729,128762,128779,128829,128846,128879,128896,128912,128946,128962,128996,129530,129713,129746,129780,129796,129813,129830,129847,129880,129897,129930,129947,129963,129980,129997,130013,130030,130031,130032,130047,130063,130080,130097,130130,130147,130197,130214,130247,130264,130297,130314,130347,130497,130514,130597,130814,131081,131114,131148,131181,131198,131231,131248,131281,131298,131348,131381,131398,131416,131417,131431,131448,131465,131481,131498,131515,131532,131548,131582,131615,131632,131665,131682,131698,131732,132466,132599,132633,132649,132666,132699,132716,132733,132816,132833,132900,132933,132966,132983,133050,133083,133100,133116,133133,133617,133634,133867,133901,133917,133951,133967,134017,134034,134084,134101,134117,134134,134151,134201,134218,134234,134251,134268,134301,134318,134401,134418,134468,134484,134501,134568,134818,134819,135068,135252,135285,135302,135335,135352,135369,135402,135419,135452,135469,135502,135519,135536,135552,135586,135602,135619,135636,135652,135669,135686,135736,135752,135786,135802,135836,135853,135869,135903,135977,135978,136119,136386,136587,136637,136687,136720,136737,136753,136770,136787,136837,136854,136887,136904,136920,136937,136987,137004,137020,137037,137054,137070,137104,137120,137171,137187,137221,137237,137254,137287,137319,137320,137321,137679,137680,138038,138055,138056,138057,138121,138155,138172,138222,138238,138255,138355,138372,138388,138405,138422,138455,138469,138470,138472,138474,138475,138522,138539,138555,138622,138639,138655,138672,139156,139173,139406,139473,139489,139540,139556,139590,139606,139656,139673,139690,139740,139742,139743,139756,139773,139790,139806,139823,139840,139873,139890,139940,139957,140007,140023,140073,140107,140807,140824,140874,140891,140908,140958,140974,141024,141041,141058,141074,141091,141108,141140,141141,141158,141175,141191,141208,141225,141258,141275,141308,141325,141358,141375,141391,141408,141425,141592,141608,141692,141942,142142,142176,142242,142259,142276,142309,142326,142376,142392,142442,142459,142476,142492,142519,142520,142526,142576,142609,142626,142676,142693,142726,142743,142793,142809,142876,143560,143610,143627,143710,143727,143777,143794,143827,143844,143861,143877,143894,143911,143927,143944,143977,143994,144027,144061,144111,144161,144194,144211,144261,144578,144595,144928,144978,145045,145062,145095,145145,145162,145212,145229,145262,145279,145303,145304,145312,145329,145345,145362,145379,145412,145429,145462,145479,145495,145512,145546,145562,145579,145646,146330,146363,146380,146413,146430,146480,146496,146530,146547,146597,146613,146647,146679,146680,146697,146713,146730,146747,146763,146780,146830,146847,146880,146897,146947,146964,146997,147214,147364,147381,147414,147531,147564,147714,147781,147798,147814,147831,147848,147865,147881,147915,147931,147981,147998,148015,148064,148065,148081,148098,148115,148131,148148,148165,148198,148215,148265,148282,148315,148332,148348,148398,148432,149132,149149,149166,149249,149283,149299,149316,149349,149366,149449,149466,149483,149499,149516,149533,149550,149583,149600,149633,149650,149666,149700,149766,149783,150467,150517,150567,150584,150601,150634,150651,150667,150701,150717,150767,150784,150801,150817,150837,150838,150851,150868,150884,150901,150934,150951,150984,151001,151034,151051,151101,151118,151201,151685,151919,151952,151985,152002,152019,152035,152052,152102,152119,152152,152169,152186,152202,152231,152232,152236,152252,152302,152319,152352,152419,152503,152519,152553,152703,152719,152803,153070,153237,153287,153320,153337,153370,153387,153403,153420,153437,153487,153504,153537,153554,153570,153613,153614,153620,153637,153654,153670,153687,153704,153754,153770,153804,153820,153854,153871,153921,153937,154437,154438,154472,154972,154972,155472,155473,155556,156056,156089,156106,156123,156139,156156,156173,156190,156223,156240,156290,156306,156323,156340,156356,156373,156390,156406,156423,156456,156473,156523,156540,156557,156573,156590,156607,156640,156657,156673,156723,156757,157007,157008,157257,157441,157508,157524,157574,157591,157624,157641,157691,157708,157724,157741,157774,157791,157808,157824,157841,157858,157875,157925,157941,157991,158008,158041,158058,158075,158091,158172,158173,158308,158358,158392,158609,158792,158825,158909,158926,158959,158976,159026,159042,159092,159126,159142,159176,159193,159209,159259,159276,159309,159326,159376,159393,159426,159443,159526,159860,159861,160194,160210,160260,160277,160310,160360,160377,160427,160444,160544,160561,160594,160611,160674,160675,160677,160679,160680,160694,160711,160777,160794,160844,160878,161361,161378,161612,161662,161695,161712,161728,161762,161778,161812,161828,161862,161879,161895,161929,161941,161942,161962,161979,162012,162029,162112,162129,162212,162229,162246,162312,162980,163046,163063,163080,163096,163113,163130,163163,163180,163230,163247,163280,163297,163325,163326,163330,163347,163363,163397,163413,163447,163480,163514,163530,163580,163597,163614,163647,163864,164114,164281,164314,164364,164398,164414,164448,164464,164481,164498,164515,164531,164565,164581,164631,164648,164665,164681,164712,164713,164731,164748,164765,164781,164815,164831,164882,164898,164948,164965,164982,165015,165065,165749,165782,165849,165899,165916,165933,165949,165966,165983,165999,166049,166066,166099,166116,166149,166166,166183,166200,166233,166250,166300,166333,166350,166366,166416,166900,166917,167150,167217,167234,167251,167284,167301,167351,167367,167417,167451,167518,167534,167551,167584,167601,167651,167668,167718,167734,167751,167768,167784,167835,168110,168111,168385,168552,168619,168652,168669,168719,168735,168769,168785,168819,168852,168902,168919,168952,168969,169002,169019,169069,169086,169119,169136,169169,169203,169277,169278,169419,169670,169703,169903,169920,169987,170003,170037,170053,170070,170103,170120,170170,170187,170220,170237,170270,170287,170304,170337,170354,170404,170420,170470,170487,170521,170537,170587,170621,171271,171275,171276,171338,171388,171405,171455,171488,171538,171638,171655,171688,171705,171738,171770,171771,171772,171774,171775,171839,171889,171905,171939,171955,171972,172456,172472,172706,172739,172773,172806,172823,172873,172890,172923,172940,172956,172990,173006,173023,173038,173039,173040,173056,173073,173106,173123,173156,173173,173223,173240,173290,173307,173323,173357,173390,173924,174107,174174,174191,174224,174258,174274,174324,174341,174358,174374,174391,174408,174438,174439,174441,174458,174491,174508,174525,174558,174575,174608,174625,174658,174675,174691,174725,174741,174775,174958,175175,175209,175242,175325,175442,175475,175542,175559,175576,175592,175609,175626,175659,175676,175726,175742,175759,175776,175792,175808,175809,175809,175826,175843,175859,175876,175893,175926,175943,175976,175993,176043,176059,176076,176093,176109,176159,176844,176860,176910,176977,177027,177044,177077,177094,177110,177160,177194,177211,177244,177261,177327,177344,177361,177477,177494,177528,177544,178044,178045}
const int16 angles[] = {-1,0,0,0,0,359,354,316,295,277,270,256,222,204,196,175,166,156,143,132,91,76,30,21,0,0,359,359,354,333,316,294,270,256,242,222,218,205,197,176,168,157,144,125,109,94,72,60,44,32,19,19,0,359,331,332,348,358,344,332,316,296,281,267,254,242,224,216,210,196,170,158,150,140,124,109,96,82,70,54,44,37,32,20,0,0,0,359,340,328,325,320,318,302,310,316,320,320,324,330,334,340,354,358,350,346,334,326,318,306,306,183,183,196,224,234,252,273,286,298,310,316,320,330,338,342,359,0,8,18,32,42,58,72,86,98,111,122,132,144,155,180,181,183,196,223,234,252,272,286,298,310,318,330,342,359,0,10,16,30,38,48,63,84,98,110,120,131,143,147,160,168,208,193,182,192,210,217,235,270,286,290,302,320,329,336,359,0,10,16,30,38,56,70,83,96,108,114,124,130,139,146,164,180,181,188,194,202,213,223,232,238,232,214,199,193,186,187,196,202,215,222,230,230,351,351,326,306,281,267,254,242,230,222,210,196,176,170,156,148,138,124,108,94,82,70,58,48,43,36,31,0,0,359,359,348,332,324,305,288,274,267,254,250,238,232,220,216,208,198,194,180,166,160,146,128,114,101,88,82,70,59,49,44,37,27,14,0,359,332,342,347,358,344,346,326,318,298,282,268,256,244,226,216,212,198,192,168,160,154,136,120,106,93,80,74,58,48,36,24,9,0,0,0,359,354,328,320,318,314,306,300,308,314,318,318,325,331,338,341,347,354,359,0,0,0,359,349,338,331,325,318,310,306,306,185,185,202,234,250,266,278,290,302,313,322,328,346,359,0,0,5,18,24,32,50,58,72,92,104,110,122,137,148,180,181,182,202,213,222,232,250,270,284,290,302,318,328,334,346,359,0,26,33,51,73,87,100,112,122,133,144,154,163,163,208,207,193,181,192,220,228,247,262,276,288,294,306,317,326,332,346,359,0,6,12,25,33,43,58,73,86,100,112,122,133,144,162,180,181,180,180,187,193,202,208,218,226,236,230,224,221,220,213,211,204,196,181,184,190,199,205,215,222,234,234,344,344,326,316,297,282,268,255,244,226,216,212,198,192,178,170,158,152,134,119,104,85,72,61,50,45,38,33,21,0,0,359,359,357,350,332,316,306,288,273,260,242,230,224,220,209,202,168,162,148,131,115,101,88,74,70,58,48,36,18,18,0,359,332,332,344,344,347,356,358,358,340,328,318,301,284,271,258,246,234,224,220,212,170,164,150,142,132,117,103,90,78,66,50,38,33,0,0,359,359,358,336,318,312,307,302,309,326,332,336,342,358,348,343,334,330,320,310,306,306,180,180,194,240,256,271,284,302,314,324,336,343,359,0,2,16,22,40,64,78,98,110,122,133,149,180,180,194,228,246,262,276,288,300,317,326,332,346,359,0,24,32,49,64,78,98,110,122,132,137,152,162,162,208,208,192,182,196,215,224,244,259,272,286,298,315,324,330,344,359,0,3,10,24,31,41,57,79,92,106,118,133,145,150,172,180,180,186,198,208,214,222,230,241,234,226,220,212,207,204,196,194,188,186,194,200,210,217,222,224,232,239,239,180,180,186,194,211,220,240,256,269,277,283,296,312,322,328,341,347,359,0,0,8,20,29,36,54,69,82,96,108,124,135,142,147,158,180,180,184,210,226,237,254,269,282,294,312,322,328,346,359,0,0,14,27,45,61,82,96,113,124,139,150,164,208,207,193,182,192,210,217,236,252,267,280,292,310,320,326,338,346,359,0,4,18,32,50,65,80,94,106,122,133,138,145,156,174,180,181,207,213,220,228,238,232,214,212,204,201,194,181,196,204,209,221,228,232,232,180,180,194,242,258,272,286,298,308,314,318,348,359,0,1,20,36,53,67,81,94,106,118,128,138,149,162,180,180,196,214,223,242,252,258,272,286,296,314,324,329,342,348,359,0,2,10,22,29,46,62,76,89,102,114,124,134,146,150,164,164,210,210,194,182,184,196,236,252,267,280,298,310,316,320,330,337,359,0,10,18,32,42,58,73,94,106,124,134,142,151,165,165,45,45,45,-1,0,0,0,359,341,336,320,300,276,263,250,238,228,218,206,192,172,164,152,144,134,118,97,84,70,60,44,32,0,0,359,359,346,320,308,299,282,262,250,238,226,222,216,203,196,177,156,148,130,115,101,81,68,58,47,42,35,30,30,0,359,332,333,346,358,358,326,306,297,290,274,254,242,230,220,209,195,176,168,156,148,138,122,107,94,74,62,52,42,35,30,8,0,0,359,359,350,344,334,328,320,318,310,300,308,314,324,330,338,352,354,347,345,332,326,318,310,310,188,188,212,232,241,257,271,284,296,308,320,328,343,359,0,2,10,22,38,56,71,85,104,116,133,144,174,180,181,183,196,215,224,234,252,274,286,298,310,316,320,339,346,359,0,6,20,26,43,67,82,102,114,130,143,147,166,208,194,194,182,182,193,211,220,239,256,270,288,300,312,322,328,358,359,0,18,36,54,76,90,102,114,131,143,147,180,180,186,198,205,215,222,236,236,214,208,205,194,182,192,197,204,210,212,222,230,234,234,359,359,340,308,300,284,262,250,238,226,216,204,197,158,149,131,108,94,80,74,62,46,34,30,0,0,359,359,356,350,314,295,280,265,246,235,223,214,208,175,168,136,128,113,99,85,68,56,45,38,28,14,0,359,332,346,354,357,359,0,0,0,359,336,320,292,277,262,250,232,220,212,198,192,178,170,158,151,134,110,96,76,64,54,43,36,32,8,0,0,359,359,358,348,344,328,320,316,307,306,318,319,326,332,339,346,352,354,346,338,329,322,314,306,306,184,184,202,210,226,237,246,260,276,282,294,306,318,322,328,340,347,359,359,0,36,54,69,76,90,102,114,131,143,152,180,181,185,210,217,237,254,268,282,294,312,322,328,347,358,359,0,6,17,34,52,74,88,102,112,124,134,139,146,150,150,208,207,193,190,182,181,213,222,241,264,278,292,320,324,359,0,8,22,40,120,130,142,154,160,180,180,188,198,204,214,220,230,242,234,230,224,221,220,214,208,201,188,183,192,198,208,214,222,228,232,232,-1,209,209,205,194,182,183,196,234,252,274,287,305,317,320,326,340,346,359,0,0,6,20,26,45,68,82,102,114,131,143,160,180,181,183,190,199,208,215,222,230,240,232,226,222,222,218,212,209,198,195,189,186,184,198,213,221,223,232,232,356,356,330,322,303,287,272,252,240,228,218,214,204,184,166,154,136,120,106,92,80,66,50,41,34,29,22,13,0,0,359,359,357,332,324,306,288,273,254,242,230,220,209,195,176,168,156,148,130,108,94,80,68,52,42,35,30,30,0,359,331,332,342,342,346,358,354,329,312,294,278,264,252,240,228,222,218,196,178,166,158,146,128,114,100,86,74,62,52,42,35,24,0,0,0,359,350,338,332,324,320,318,312,304,302,304,312,318,322,328,338,342,348,359,349,344,330,322,318,312,312,185,185,192,204,212,228,246,262,282,294,306,318,328,342,348,359,0,0,8,22,37,54,69,84,104,114,126,136,143,154,162,180,181,185,204,218,226,246,254,268,282,294,306,318,322,328,340,346,359,359,0,6,20,26,44,59,74,94,106,118,128,138,150,163,163,208,207,194,180,200,212,230,248,264,278,290,302,320,335,348,359,0,8,16,29,37,47,62,70,76,96,108,120,131,143,147,160,181,211,221,224,232,238,234,228,210,204,188,182,188,194,208,218,220,230,234,234,354,354,336,329,312,293,270,257,238,226,220,216,208,176,170,156,149,139,124,109,74,62,44,36,31,0,0,359,359,355,336,330,314,303,286,272,258,246,234,222,218,207,200,182,166,160,146,135,127,112,92,78,66,56,45,38,29,14,0,359,332,346,358,352,334,318,300,290,282,268,248,236,224,216,210,202,168,162,146,137,130,114,100,86,68,57,46,35,30,16,0,359,359,359,0,0,0,0,359,336,328,325,308,304,304,326,332,335,342,346,356,359,0,0,0,359,349,346,340,327,319,316,312,312,184,184,210,226,253,268,282,294,312,322,328,358,359,0,8,14,29,36,46,62,76,90,110,120,137,148,168,180,181,186,208,224,237,264,278,298,310,316,319,330,337,359,0,12,18,32,42,58,73,87,100,112,123,134,139,146,150,150,208,207,193,182,184,208,216,235,252,268,288,300,318,328,333,346,359,0,3,36,54,69,90,104,114,126,143,154,180,180,192,196,213,222,233,238,230,224,220,220,216,210,206,200,194,186,180,190,199,213,220,228,239,239,180,180,184,212,222,253,277,290,310,320,331,346,359,0,4,12,25,34,51,66,80,94,106,113,124,135,142,151,180,180,194,198,212,230,256,271,284,296,314,324,337,359,0,12,18,32,42,50,65,86,100,112,123,139,150,164,208,200,198,197,192,189,180,204,211,228,238,245,255,270,282,295,312,322,328,359,0,10,16,30,38,47,62,78,91,110,121,132,144,148,168,180,181,185,191,208,219,222,230,240,232,215,209,206,198,195,190,186,186,192,200,206,218,231,231,179,180,192,210,218,237,254,262,276,288,300,318,328,334,347,359,0,8,14,29,36,54,69,83,96,109,120,136,147,180,180,196,210,227,244,254,262,276,294,306,318,322,335,342,359,0,2,13,37,55,70,104,135,147,160,160,208,207,192,182,185,204,210,226,244,253,260,274,292,304,316,326,331,359,0,4,12,25,33,43,58,80,94,106,117,128,138,157,164,164,-1,90,90,90,90,-1,354,354,342,336,321,312,302,294,278,264,252,234,222,218,212,199,193,180,172,159,143,125,103,89,82,76,70,58,47,35,31,11,0,0,359,359,355,330,312,286,271,257,244,227,217,212,205,182,170,164,150,140,132,116,94,82,64,52,42,35,23,16,0,359,332,334,336,348,358,356,322,303,286,271,252,240,222,205,192,172,164,151,125,110,96,82,65,54,43,32,0,0,359,359,358,348,346,335,326,318,305,304,326,332,339,346,359,0,0,0,359,356,350,337,331,318,306,306,190,190,210,226,246,254,269,282,294,306,318,322,332,353,359,0,10,24,42,58,94,106,134,142,154,180,180,204,221,229,240,248,264,277,290,308,320,329,343,359,0,2,10,22,42,57,72,94,106,118,134,145,150,165,208,194,186,183,180,194,198,212,230,240,246,256,271,284,296,314,324,330,338,359,0,12,20,30,44,60,75,96,108,126,136,143,154,180,181,182,196,210,214,219,222,226,236,238,228,221,216,210,204,196,194,188,182,188,197,206,210,216,228,228,356,356,330,321,302,286,270,250,238,220,204,164,158,139,122,108,87,74,57,46,41,34,29,0,0,359,359,356,328,308,290,266,254,242,230,220,198,168,154,136,120,106,92,72,61,50,38,28,14,0,359,332,347,348,358,359,334,318,298,290,274,260,248,230,220,209,194,174,168,154,136,120,98,84,66,55,45,33,14,0,0,0,359,352,342,336,326,314,304,324,330,338,345,350,359,0,0,0,359,344,334,327,318,316,306,306,184,184,200,216,236,254,276,288,300,312,318,328,342,347,359,0,1,8,22,38,56,70,85,104,116,132,144,149,163,180,181,185,212,222,252,268,282,300,312,318,322,335,342,359,0,1,14,36,46,62,76,90,102,114,126,135,142,152,166,166,210,196,194,194,188,182,186,211,228,238,245,254,270,282,294,312,322,328,340,346,359,0,0,8,20,26,34,52,67,81,96,108,124,134,139,146,157,180,181,182,193,208,222,228,235,238,230,220,213,208,199,194,180,184,190,211,219,228,232,232,-1}
int maxIdx = 2579;
int bpm=173;
int ribbon_offset=0;

//deadzone for autoswirl set negative to disable
int deadzone=5;
int ms=0;
int ms_ribbon=0;
int running=0;

int idx=0;
int curAngle=-1;

int next_beat=0;
int beat_anticipate=0;
int autoswirl=0;

init {
	beat_anticipate=60000/(bpm*4);
}

main {
	ms+=get_rtime();
	if (get_val(XB1_VIEW)>0 && event_press(XB1_A)) {
		ms=0;
		idx=0;
		next_beat=0;
		cls_oled(0);
		running=1;
		putc_oled(1,82);
		putc_oled(2,117);
		putc_oled(3,110);
		puts_oled(40,20,2,3,1);
	}
	if (event_press(XB1_B)) {
		ms=0;
		idx=0;
		next_beat=0;
		cls_oled(0);
		running=0;
		putc_oled(1,83);
		putc_oled(2,116);
		putc_oled(3,111);
		putc_oled(4,112);
		puts_oled(30,20,2,4,1);
	}
	if (event_press(XB1_RB)) {ribbon_offset = ribbon_offset + 25;set_val(TRACE_1,ribbon_offset);}
	if (event_press(XB1_LB)) {ribbon_offset = ribbon_offset - 25;set_val(TRACE_1,ribbon_offset);}
	
	if (running) {
		set_val(TRACE_2,ms);
		ms_ribbon = ms + ribbon_offset;
		//advance until we reach the end or catch up with the time code
		while (idx<maxIdx && ms_ribbon>times[idx + 1]) {
			idx++;
		}
		//if we've reached the end of the ribbon, releast LS
		if (idx>=maxIdx || angles[idx]== -1) {
			curAngle=-1;
		} else {
			curAngle=angles[idx]+(angles[idx + 1]-angles[idx])*(ms_ribbon-times[idx])/(times[idx + 1]-times[idx]);
		}
		//set LS position if ribbon present
		if (curAngle>=0) set_polar(POLAR_LS,curAngle,32767);

		//shoot if we are on the beat
		if ((ms+beat_anticipate)>((next_beat*2*60000)/bpm)) {
			next_beat+=1;
			combo_run(fire);
		}

		//swirl reticle if idle
		if (event_press(XB1_X)) {if (autoswirl==0) {autoswirl=1} else {autoswirl=0}}
		if (autoswirl==1 && get_val(XB1_RX)<=deadzone && get_val(XB1_RY)<=deadzone && get_val(XB1_RX)>=-deadzone && get_val(XB1_RY)>=-deadzone) {set_polar(POLAR_RS,ms%360,32767);}
	}
}

combo fire {
	set_val(XB1_RT,100);wait(50);
}