const int32 times[] = {0,22039,22539,23574,23674,23757,23807,23924,24107,24191,24224,24274,24291,24308,24324,24341,24358,24775,24791,25075,25976,26043,26059,26226,26310,26343,26393,26426,26560,26677,26693,26710,26727,26760,26777,26810,26860,26877,26894,26927,26977,26994,27027,27044,27077,27127,27160,27194,27261,27277,27294,27327,27344,27394,27411,27477,27494,27528,27578,27741,27742,27744,27911,27912,27913,27978,28011,28045,28076,28077,28078,29129,29146,29179,29196,29279,29313,29413,29463,29513,29696,29763,29813,29830,29847,29863,29880,29913,30314,30330,30547,30564,30581,30681,31281,31331,31348,31365,31532,31565,31582,31665,31698,31748,31765,31815,31832,31882,31899,31915,31932,31949,31965,31982,32049,32082,32549,32599,32616,32666,32683,32699,32716,32733,32749,32783,32799,32850,32900,32983,33016,33033,33050,33083,33100,33150,33166,33200,33217,33233,33250,33282,33283,33283,33366,33367,33450,33550,33567,33584,33600,33632,33633,33634,34318,34434,34468,34484,34518,34651,34668,34735,34751,34768,34801,34818,34868,34885,35002,35118,35135,35169,35202,35235,35269,35319,35369,35385,35402,35419,35435,35452,35853,35869,36069,36153,36520,36553,36570,37070,37104,37120,37137,37154,37187,37254,37287,37304,37337,37354,37404,37421,37471,37487,37521,37538,37571,37588,37638,37671,37721,37754,37788,37821,37838,37871,37888,37921,37938,37971,38005,38038,38055,38121,38155,38172,38205,38238,38305,38322,38338,38405,38422,38455,38472,38539,38555,38622,38639,38853,38854,38856,39006,39007,39008,39039,39089,39106,39122,39139,39186,39187,39189,39406,39410,39411,39423,39447,39448,39456,40224,40290,40307,40324,40357,40374,40407,40424,40474,40490,40541,40591,40607,40641,40657,40691,40724,40757,40774,40824,40874,40908,40974,40991,41408,41425,41675,41692,41708,41725,41758,41775,42659,42676,42759,42826,42860,42893,42910,42926,42960,42976,42993,43010,43026,43043,43060,43076,43093,43177,43660,43694,43727,43744,43777,43794,43810,43844,43861,43877,43894,43944,43977,43994,44044,44111,44127,44144,44178,44194,44244,44261,44294,44311,44328,44392,44393,44394,44528,44545,44547,44548,44595,44611,44661,44678,44695,44725,44726,44728,45429,45512,45562,45596,45629,45729,45729,45730,45746,45761,45762,45762,45779,45796,45829,45863,45879,45896,45946,45979,46029,46046,46096,46129,46163,46213,46230,46263,46363,46380,46396,46430,46463,46480,46496,46513,46530,46547,46964,46980,47631,47648,47664,48165,48198,48248,48282,48298,48332,48348,48382,48398,48465,48515,48532,48565,48582,48615,48665,48682,48699,48715,48799,48815,48832,48899,48932,48966,49032,49049,49082,49099,49132,49166,49216,49249,49266,49283,49316,49349,49416,49433,49483,49516,49533,49583,49600,49666,49683,49716,49930,49931,49933,50008,50009,50083,50117,50150,50200,50250,50282,50283,50284,50309,50310,50334,50534,50535,50734,50751,50767,50784,50785,50786,50801,50815,50816,50817,50968,51084,51118,51134,51168,51318,51351,51418,51435,51468,51485,51518,51552,51602,51618,51652,51668,51718,51752,51768,51785,51835,51852,51902,51919,51969,52002,52019,52035,52069,52085,52102,52503,52519,53453,53504,53921,54054,54104,54137,54154,54221,54254,54271,54321,54338,54388,54404,54438,54454,54488,54505,54521,54538,54571,54588,54604,54605,54605,54621,54655,54671,54688,54705,54721,54738,54755,54788,54805,54855,54872,54922,54938,55005,55022,55072,55138,55155,55189,55222,55239,55289,55305,55355,55372,55422,55439,55487,55488,55489,56840,56848,56849,56874,56907,56974,56990,57007,57024,57040,57191,57224,57241,57257,57274,57291,57307,57324,57374,57391,57457,57474,57508,57541,57824,57908,57925,58008,58091,58125,58158,58192,58225,58258,58292,58308,58340,58341,58342,58992,58993,59643,59710,59760,59810,59826,59877,59893,59977,59993,60043,60060,60093,60127,60194,60227,60260,60277,60327,60360,60444,60460,60544,60561,60594,60644,60678,60679,60761,60794,60811,60861,60878,60928,60944,60978,60994,61028,62412,62462,62496,62529,62546,62563,62579,62763,62779,62813,62829,62863,63046,63063,63096,63814,63830,63897,65148,65199,65232,65282,65299,65315,65332,65349,65399,65415,65465,65482,65532,65549,65599,65616,65632,65649,65682,65705,65706,65732,65749,65766,65816,65832,65849,65899,65916,65966,65983,66033,66049,66099,66116,66149,66250,66300,66350,66366,66450,66500,66517,66533,66550,66598,66599,66600,66666,66667,66733,66750,66850,66867,66900,66916,66917,66917,67067,67084,67134,67233,67234,67267,67321,67322,67484,67968,68018,68051,68068,68101,68118,68151,68168,68218,68235,68285,68318,68335,68385,68435,68452,68485,68535,68585,68619,68669,68685,68702,68719,68735,69152,69169,69386,69903,70387,70404,70420,70437,70470,70487,70537,70554,70587,70621,70671,70687,70721,70737,70754,70787,70804,70854,70871,70904,70921,70971,71004,71038,71071,71088,71104,71121,71154,71171,71205,71221,71255,71305,71338,71371,71388,71421,71438,71471,71488,71505,71588,71622,71688,71705,71738,71755,71805,71822,71855,71872,71922,72136,72137,72139,72256,72281,72282,72306,72339,72356,72406,72439,72470,72471,72472,73507,73524,73540,73557,73624,73640,73724,73740,73774,73790,73824,73841,73857,73891,73907,73974,73991,74041,74057,74141,74191,74208,74224,74241,74258,74291,74708,74725,74958,75425,75609,75943,75976,76026,76043,76059,76093,76109,76143,76210,76243,76260,76293,76310,76326,76376,76393,76426,76443,76476,76710,76727,76743,76777,76944,76994,77044,77077,77094,77110,77160,77227,77294,77377,77394,77411,77444,77494,77594,77611,77644,77692,77693,77694,79062,79063,79064,79096,79112,79129,79146,79196,79246,79396,79446,79463,79479,79513,80247,80264,80297,80447,80514,80531,80572,80573,80614,80622,80623,80631,81231,81232,81832,81833,81834,81899,81932,81999,82015,82065,82082,82132,82149,82199,82216,82249,82266,82282,82316,82366,82399,82416,82449,82466,82482,82533,82549,82599,82616,82666,82683,82733,82766,82783,82833,82873,82874,82916,82950,82966,82983,83016,83033,83050,83100,83116,83166,83183,83200,83217,84601,84635,84668,84701,84718,84735,84768,84785,84952,84968,84985,85002,85018,85052,85269,85302,86003,86036,86053,86103,87387,87471,87487,87504,87571,87588,87638,87654,87704,87721,87771,87788,87821,87838,87903,87904,87905,87921,88005,88021,88055,88071,88121,88138,88188,88205,88238,88255,88305,88322,88388,88438,88505,88522,88555,88572,88589,88622,88639,88689,88705,88722,88739,88770,88771,88772,88906,88916,88917,88956,89039,89072,89089,89117,89118,89122,89206,89223,89289,89323,89623,89624,89625,89640,89654,89655,89656,90157,90190,90207,90257,90290,90324,90340,90357,90374,90407,90440,90474,90490,90507,90557,90574,90607,90624,90657,90707,90724,90741,90774,90791,90824,90841,90858,90874,90924,90941,91358,91375,91592,91758,91775,91825,92075,92409,92593,92643,92676,92693,92709,92726,92776,92793,92826,92843,92893,92910,92943,92960,93010,93026,93043,93076,93110,93143,93193,93277,93310,93327,93360,93377,93393,93427,93443,93460,93510,93527,93560,93577,93610,93627,93644,93660,93677,93694,93760,93794,93861,93894,93911,93994,94011,94127,94325,94326,94328,94403,94404,94478,94494,94528,94595,94611,94628,94645,94659,94660,94661,95712,95729,95746,95779,95796,95829,95863,95879,95913,95946,95963,96013,96029,96063,96079,96129,96213,96263,96296,96346,96363,96413,96430,96446,96463,96480,96496,96914,96930,97147,97648,98148,98182,98198,98265,98282,98332,98365,98465,98498,98515,98532,98549,98565,98582,98665,98916,98949,98982,99149,99183,99216,99233,99266,99283,99299,99333,99349,99366,99416,99449,99533,99566,99583,99616,99633,99650,99700,99716,99766,99783,99816,99833,99850,100350,100351,106257,106757,106757,107257,107258,107591,108091,108091,108591,108592,109126,109626,109626,110126,110127,110478,110978,111144,111145,111146,111161,111178,111245,111261,111295,111325,111326,111328,112362,112412,112462,112529,112563,112596,112679,112696,112763,112779,112813,112846,112896,112946,112996,113013,113063,113080,113096,113113,113130,113547,113564,114431,114515,114781,114798,114815,114848,114865,114932,114948,114982,115015,115065,115082,115115,115132,115148,115182,115199,115232,115249,115299,115315,115365,115482,115532,115549,115582,115632,115649,115682,115699,115749,115766,115782,115816,115866,115883,115899,115949,115966,115983,115999,116033,116099,116116,116183,116216,116233,116316,116530,116531,116533,116667,116675,116676,116700,116733,116750,116800,116817,116834,116865,116866,116867,117885,117918,117935,117951,117985,118035,118051,118068,118101,118118,118168,118185,118235,118335,118368,118452,118468,118519,118535,118569,118602,118619,118635,118669,118685,119102,119119,120137,120153,120320,120354,120404,120420,120454,120487,120521,120537,120587,120637,120654,120687,120704,120721,120737,120754,120771,120838,120854,121338,121371,121438,121471,121488,121505,121538,121555,121622,121688,121722,121788,121805,121839,121855,121905,121922,121939,121972,121989,122005,122022,122039,122070,122071,122072,122189,122222,122239,122241,122242,122256,122272,122339,122356,122389,122404,122405,122406,123440,123444,123445,123457,123464,123465,123524,123540,123624,123640,123657,123674,123707,123740,123790,123807,123857,123874,123907,123941,123974,123991,124041,124091,124124,124141,124157,124174,124191,124208,124224,124241,124641,124658,125859,125909,125943,125976,126009,126026,126043,126076,126093,126143,126159,126193,126226,126260,126276,126326,126343,126376,126443,126460,126510,126543,126577,126593,126627,126643,126677,126693,126743,126760,126777,126810,126844,126860,126910,126927,126960,126977,126994,127044,127094,127160,127194,127227,127244,127327,127394,127411,127625,127626,127628,127761,127769,127770,127794,127845,127895,127911,127928,127959,127960,127961,128996,129012,129029,129062,129079,129112,129179,129196,129246,129296,129329,129379,129396,129413,129463,129479,129530,129546,129596,129663,129696,129730,129746,129763,129780,130197,130214,130480,131265,131748,131782,131815,131865,131899,131932,131949,131999,132015,132065,132082,132132,132149,132165,132182,132199,132232,132249,132266,132293,132294,132299,132316,132332,132366,132382,132399,132416,132432,132482,132499,132549,132566,132616,132633,132683,132699,132733,132749,132783,132816,132833,132900,132916,132966,132983,133050,133066,133083,133100,133150,133164,133165,133166,134568,134569,134570,134601,134618,134701,134735,134902,134918,134935,134952,135002,135919,135953,136034,136035,136036,137321,137322,137323,137437,137471,137487,137621,137738,137754,137771,137821,137855,137905,137921,137938,137971,138005,138021,138088,138105,138155,138172,138238,138255,138288,138355,138366,138367,138422,138438,138455,138505,138522,138539,138589,138605,138622,138639,138655,138672,138722,140090,140224,140240,140274,140440,140490,140507,140557,141058,141074,141091,141108,141124,141175,141208,141241,141358,141391,141425,141441,141458,141491,141525,141542,141575,142860,142876,142926,142976,143010,143026,143076,143093,143143,143160,143210,143227,143277,143293,143327,143343,143377,143393,143394,143395,143410,143427,143460,143477,143493,143527,143544,143594,143610,143644,143660,143727,143744,143794,143810,143827,143894,143927,143977,144011,144044,144111,144144,144161,144178,144211,144276,144277,144278,144394,144406,144407,144444,144494,144545,144578,144609,144610,144611,145629,145679,145712,145729,145746,145779,145796,145829,145863,145879,145896,145963,145979,146029,146096,146113,146129,146163,146180,146230,146246,146346,146363,146380,146396,146430,146847,146864,147097,147564,147731,148081,148115,148131,148182,148198,148232,148248,148282,148315,148365,148382,148415,148432,148482,148498,148532,148549,148582,148615,148665,148682,148732,148765,148782,148799,148832,148849,148882,148899,148932,148949,148966,148999,149049,149066,149099,149116,149149,149166,149183,149249,149283,149366,149383,149416,149433,149483,149499,149533,149550,149600,149750,149765,149766,149766,149950,149956,149957,150000,150017,150067,150083,150100,150165,150166,150167,151084,151101,151218,151235,151318,151351,151401,151418,151451,151468,151535,151568,151602,151618,151652,151685,151718,151735,151785,151835,151869,151885,151919,151935,151969,151985,152402,152419,152653,153136,153620,153654,153670,153704,153737,153754,153770,153804,153837,153887,153904,153937,153971,154021,154037,154104,154154,154655,154671,154721,154771,154788,154805,154838,154955,154988,155055,155088,155105,155155,155189,155289,155305,155370,155371,155372,156740,156741,156742,156823,156874,156907,156924,156957,157090,157124,157140,157191,157207,157324,157357,157391,158108,158158,158175,158223,158224,158225,158492,158509,159493,159501,159502,159526,159543,159576,159660,159676,159743,159760,159810,159826,159877,159893,159943,159977,159993,160010,160060,160093,160110,160127,160143,160160,160210,160227,160294,160310,160360,160377,160444,160460,160527,160557,160558,160577,160644,160677,160694,160744,160761,160811,160827,160861,160878,160911,162296,162329,162346,162412,162446,162462,162646,162663,162713,162746,163380,163397,163413,163447,163480,163697,163714,163730,163747,163780,165065,165082,165098,165182,165199,165215,165265,165282,165315,165332,165349,165399,165415,165465,165482,165516,165532,165566,165593,165594,165599,165616,165649,165666,165716,165732,165782,165799,165849,165866,165899,165916,165966,165999,166033,166066,166133,166149,166183,166200,166216,166233,166250,166283,166300,166350,166366,166383,166400,166416,166464,166465,166466,166600,166608,166609,166633,166733,166750,166783,166800,166812,166813,166817,167184,167818,167820,167821,167851,167862,167863,167868,167885,167901,167968,168001,168051,168085,168168,168218,168235,168268,168285,168335,168352,168402,168418,168485,168502,168552,168569,168585,168602,168619,169036,169052,169269,169770,170237,170287,170454,170470,170487,170537,170554,170604,170654,170671,170704,170737,170754,170771,170821,170854,170888,170938,170971,170988,171021,171054,171138,171171,171205,171221,171255,171288,171321,171355,171388,171421,171471,171538,171655,171672,171705,171805,171955,171971,171972,171972,172139,172147,172148,172189,172222,172239,172272,172289,172306,172322,172354,172355,172356,172389,173340,173342,173343,173357,173382,173383,173407,173423,173490,173507,173540,173557,173590,173607,173640,173657,173724,173841,173857,173907,173924,173957,173991,174024,174091,174107,174124,174141,174157,174174,174591,174608,174842,175309,175742,175826,175859,175976,175993,176009,176026,176059,176093,176109,176126,176159,176193,176210,176260,176310,176343,176860,176960,176977,176994,177027,177060,177127,177144,177177,177261,177277,177311,177327,177344,177394,177411,177427,177461,177477,177511,177528,178028,178029}
const int16 angles[] = {-1,0,0,0,10,16,22,30,14,8,4,3,16,22,36,45,52,52,180,179,179,176,173,160,150,149,152,157,168,178,179,176,172,168,162,158,149,144,142,134,127,122,121,130,138,158,168,185,204,210,220,235,248,266,276,296,308,318,326,359,0,0,0,0,359,342,336,346,359,0,0,1,4,6,8,15,18,26,30,26,11,4,2,8,20,26,42,55,55,180,180,178,180,179,180,179,180,179,180,178,172,160,152,144,140,132,126,120,124,132,136,142,145,154,172,180,180,185,190,200,203,194,176,168,148,154,158,164,174,202,217,226,245,260,274,294,306,318,328,333,340,359,0,0,0,359,359,332,340,346,348,359,0,0,1,0,1,0,1,0,0,14,16,20,24,30,36,42,60,43,37,34,26,22,16,8,6,14,26,32,41,53,53,178,180,181,179,180,179,180,178,174,172,168,163,150,146,139,134,130,124,120,126,130,134,138,143,147,154,160,168,174,178,174,169,164,160,156,151,146,138,134,129,122,130,138,148,164,186,192,200,222,238,250,262,284,294,314,322,359,0,0,0,0,359,350,338,335,340,348,359,0,0,0,0,359,358,359,0,0,0,14,16,22,26,30,35,42,48,52,60,54,50,46,42,37,32,26,22,16,6,2,34,49,49,181,180,179,180,179,180,179,180,173,160,147,142,134,132,128,122,116,123,128,136,139,145,148,158,180,180,184,194,196,207,197,180,160,150,152,157,164,170,172,188,214,224,242,258,272,292,304,316,326,331,359,0,0,1,0,0,359,348,340,339,344,352,359,0,0,1,0,1,0,1,0,0,359,347,359,0,0,2,8,12,18,20,24,32,41,48,53,62,54,52,42,38,34,17,15,10,5,4,16,22,34,42,54,54,180,179,180,179,179,178,168,164,160,156,150,146,140,129,122,122,126,130,134,143,144,148,150,164,166,171,176,172,165,154,149,144,138,134,126,121,130,138,144,152,169,191,195,217,230,244,262,274,294,304,316,359,0,0,0,359,359,358,347,334,348,359,0,0,0,359,359,359,0,0,2,0,0,0,359,354,359,0,0,1,0,1,0,1,0,8,19,24,28,33,38,46,52,57,60,56,50,44,42,36,31,26,20,15,8,0,6,16,30,46,53,53,180,181,179,181,180,183,194,197,222,234,245,261,270,284,292,302,310,318,320,328,333,347,350,359,0,0,4,18,23,33,38,45,50,59,68,78,92,100,114,122,136,145,158,184,192,204,220,239,264,278,298,310,326,340,359,0,0,0,0,359,358,348,332,327,314,306,302,302,304,308,318,321,328,328,332,332,330,330,332,330,332,330,331,330,331,331,330,332,330,332,332,342,350,359,0,0,0,359,359,342,322,304,292,277,267,244,234,220,218,210,194,170,155,143,135,118,102,76,68,47,37,30,15,0,359,323,303,286,264,250,232,222,210,196,180,180,194,206,214,222,226,240,239,230,222,220,208,208,210,208,208,200,180,180,183,192,210,213,220,224,236,252,263,277,286,300,308,320,328,331,340,350,359,0,10,18,22,44,49,59,73,82,96,104,117,124,136,144,152,188,210,239,258,296,316,322,332,344,359,0,0,0,359,359,358,331,342,350,359,0,0,1,0,1,0,359,359,359,0,1,0,12,16,21,26,30,34,41,48,52,60,56,52,46,38,34,30,20,12,6,10,16,27,34,43,43,208,208,194,179,178,176,170,166,161,154,148,144,135,128,124,120,122,126,130,134,140,145,148,154,160,167,171,176,178,176,171,166,162,158,154,148,138,131,126,122,122,131,139,145,154,182,196,218,232,246,257,274,284,294,304,318,359,0,0,1,0,359,358,346,342,338,347,359,0,0,1,2,4,10,20,24,38,42,48,52,58,62,58,54,50,42,36,30,24,12,3,0,12,18,31,46,46,208,207,194,190,180,172,164,162,156,152,146,142,129,124,117,126,130,138,152,160,169,183,180,180,179,180,179,180,186,199,200,192,178,151,162,173,173,222,222,242,268,314,319,342,359,0,0,0,0,359,350,346,342,333,318,301,301,313,320,328,332,332,330,332,332,350,359,359,0,0,0,359,359,359,0,0,0,359,343,329,306,295,279,270,256,247,234,226,218,214,206,196,172,164,154,144,137,127,112,103,89,80,68,60,48,35,32,16,0,359,342,329,320,301,284,276,262,242,230,214,201,194,180,180,186,196,209,212,220,231,239,238,234,226,222,220,209,210,208,209,199,190,180,180,204,208,220,243,254,269,278,292,300,314,320,328,338,359,0,0,10,38,49,59,68,82,92,104,112,120,128,138,147,165,188,214,233,252,259,273,286,298,316,327,333,344,359,0,0,1,0,359,354,334,343,350,359,0,1,0,1,0,1,0,0,359,353,359,0,0,0,5,10,18,24,30,34,36,42,46,54,58,62,56,50,46,42,37,33,24,22,18,14,10,4,0,4,16,42,54,54,208,208,204,201,201,194,185,178,167,163,158,156,152,146,140,134,130,124,120,124,128,134,138,139,146,150,158,165,179,174,170,166,160,158,152,150,145,136,132,128,123,120,124,133,137,143,151,172,189,208,220,236,268,280,318,359,0,0,0,359,359,358,348,335,340,348,352,359,0,0,0,4,8,13,18,22,30,32,40,44,50,56,62,57,52,46,32,24,18,11,6,6,18,24,37,47,54,54,208,208,194,180,172,168,158,152,144,136,120,128,136,139,145,148,157,180,179,180,179,180,184,192,196,209,199,181,160,150,152,162,166,182,201,207,224,234,252,274,288,306,318,328,342,348,348,-1,356,356,356,356,-1,184,184,184,184,-1,356,356,356,356,-1,0,0,0,0,359,352,346,337,341,352,359,0,0,0,10,19,32,36,46,58,58,50,46,42,34,26,18,10,6,12,18,29,36,45,45,180,180,179,180,178,172,168,164,152,148,144,134,128,124,120,122,126,130,134,138,143,148,154,160,178,169,164,160,151,146,142,136,129,124,122,126,138,148,152,169,176,185,192,201,224,240,266,278,290,318,359,0,0,0,0,359,358,346,341,340,344,348,359,0,0,1,3,8,10,16,24,26,32,36,42,50,54,60,46,38,26,22,15,10,5,6,12,24,38,52,52,180,180,180,179,176,168,165,158,152,143,142,131,124,118,127,134,138,144,147,154,174,180,180,181,197,204,188,178,146,152,162,173,183,208,224,244,260,280,292,300,310,320,326,336,346,359,0,0,0,0,0,0,359,356,346,336,340,354,359,0,0,0,0,359,358,359,0,12,16,30,35,38,42,47,54,60,56,50,46,42,34,30,26,19,10,4,0,8,18,24,31,46,53,53,180,178,176,167,162,156,154,148,144,138,132,127,122,122,126,130,136,142,146,156,161,168,176,180,174,170,166,162,157,148,144,142,134,130,125,120,129,137,147,151,168,190,210,223,240,254,284,308,318,359,0,0,0,0,359,358,346,336,345,348,359,0,0,1,2,8,12,16,20,34,36,48,54,61,52,50,46,41,36,30,25,18,6,4,18,29,35,51,51,180,179,180,180,182,192,204,220,230,242,258,268,282,290,304,312,316,318,327,336,344,348,359,0,2,8,16,25,36,42,47,57,72,80,94,104,116,123,134,143,150,155,169,179,188,214,233,259,274,300,313,320,324,352,359,0,0,0,0,359,348,344,316,302,302,306,316,318,332,332,334,359,0,0,0,0,359,328,317,304,258,222,218,208,192,176,160,156,143,130,120,110,90,82,68,60,44,36,28,4,0,359,338,330,312,286,278,264,244,232,226,222,216,203,180,180,214,226,238,238,226,218,208,209,210,208,210,208,208,210,208,208,210,208,210,208,208,200,191,180,180,181,194,212,221,234,250,261,274,284,296,305,318,324,333,342,350,359,359,0,4,16,24,34,41,51,61,74,84,94,102,118,126,138,143,150,172,184,206,226,248,282,296,310,318,328,359,0,0,0,0,359,358,342,340,348,359,0,0,2,6,14,16,20,24,29,34,42,44,48,58,60,52,42,41,35,32,27,20,16,2,16,20,34,50,50,208,207,194,190,180,174,168,162,156,152,147,142,134,127,122,120,124,130,134,138,144,148,154,162,166,172,180,178,172,168,164,160,156,150,146,144,134,128,124,119,128,136,142,150,171,188,213,226,240,253,270,280,290,300,314,314,359,0,0,0,0,359,356,348,336,332,341,359,0,0,0,0,2,8,20,29,36,41,46,51,60,54,50,46,42,34,31,26,19,10,4,0,14,24,41,55,55,208,207,194,180,176,170,166,158,156,152,147,138,132,126,122,126,137,146,164,180,180,181,198,203,184,176,149,168,175,193,206,214,249,276,318,329,359,0,0,0,0,359,339,319,308,300,302,302,310,320,328,332,332,330,332,332,335,340,359,0,0,0,0,0,0,359,358,355,342,319,306,283,274,259,250,236,228,216,203,198,190,170,162,151,146,140,130,116,106,87,78,66,58,42,33,14,0,359,350,325,303,286,264,250,232,222,210,196,180,180,189,196,214,225,240,238,230,218,208,208,210,208,210,208,208,199,194,190,180,180,182,190,212,218,229,246,257,268,272,281,294,304,316,322,330,340,348,359,0,2,12,22,32,48,58,72,82,96,104,112,120,132,145,152,166,188,194,214,222,234,242,260,274,286,304,316,320,327,339,359,0,0,0,0,359,358,334,343,351,358,359,0,0,2,0,0,359,354,359,0,2,6,12,22,30,37,46,60,54,50,46,42,35,31,24,20,10,6,11,16,29,36,45,45,208,208,194,180,176,146,144,138,131,126,121,127,131,135,142,144,148,154,161,166,176,178,176,168,163,148,140,136,130,126,118,127,142,149,161,184,206,257,263,282,316,316,359,0,0,0,0,359,357,348,340,332,336,345,348,359,0,0,2,0,0,359,357,359,0,2,8,18,22,26,32,36,42,46,51,60,42,37,32,27,23,16,12,0,14,20,32,40,47,47,208,207,194,182,180,172,152,146,144,143,134,130,125,122,122,134,137,154,168,180,180,206,188,179,146,155,164,169,174,204,211,228,239,256,278,292,296,310,320,332,346,346,-1}
int maxIdx = 2234;
int bpm=173;
int ribbon_offset=0;

//deadzone for autoswirl set negative to disable
int deadzone=5;
int ms=0;
int ms_ribbon=0;
int running=0;

int idx=0;
int curAngle=-1;

int next_beat=0;
int beat_anticipate=0;
int autoswirl=0;

init {
	beat_anticipate=60000/(bpm*4);
}

main {
	ms+=get_rtime();
	if (get_val(XB1_VIEW)>0 && event_press(XB1_A)) {
		ms=0;
		idx=0;
		next_beat=0;
		cls_oled(0);
		running=1;
		putc_oled(1,82);
		putc_oled(2,117);
		putc_oled(3,110);
		puts_oled(40,20,2,3,1);
	}
	if (event_press(XB1_B)) {
		ms=0;
		idx=0;
		next_beat=0;
		cls_oled(0);
		running=0;
		putc_oled(1,83);
		putc_oled(2,116);
		putc_oled(3,111);
		putc_oled(4,112);
		puts_oled(30,20,2,4,1);
	}
	if (event_press(XB1_RB)) {ribbon_offset = ribbon_offset + 25;set_val(TRACE_1,ribbon_offset);}
	if (event_press(XB1_LB)) {ribbon_offset = ribbon_offset - 25;set_val(TRACE_1,ribbon_offset);}
	
	if (running) {
		set_val(TRACE_2,ms);
		ms_ribbon = ms + ribbon_offset;
		//advance until we reach the end or catch up with the time code
		while (idx<maxIdx && ms_ribbon>times[idx + 1]) {
			idx++;
		}
		//if we've reached the end of the ribbon, releast LS
		if (idx>=maxIdx || angles[idx]== -1) {
			curAngle=-1;
		} else {
			curAngle=angles[idx]+(angles[idx + 1]-angles[idx])*(ms_ribbon-times[idx])/(times[idx + 1]-times[idx]);
		}
		//set LS position if ribbon present
		if (curAngle>=0) set_polar(POLAR_LS,curAngle,32767);

		//shoot if we are on the beat
		if ((ms+beat_anticipate)>((next_beat*2*60000)/bpm)) {
			next_beat+=1;
			combo_run(fire);
		}

		//swirl reticle if idle
		if (event_press(XB1_X)) {if (autoswirl==0) {autoswirl=1} else {autoswirl=0}}
		if (autoswirl==1 && get_val(XB1_RX)<=deadzone && get_val(XB1_RY)<=deadzone && get_val(XB1_RX)>=-deadzone && get_val(XB1_RY)>=-deadzone) {set_polar(POLAR_RS,ms%360,32767);}
	}
}

combo fire {
	set_val(XB1_RT,100);wait(50);
}